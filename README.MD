# ğŸ“š BitLibro API

**BitLibro** es una aplicaciÃ³n backend RESTful desarrollada en **.NET 8** con **SQL Server** que permite gestionar prÃ©stamos de libros mediante un sistema basado en roles: `Admin`, `Employee` y `Client`.

## ğŸš€ TecnologÃ­as utilizadas

- .NET 8
- Entity Framework Core (EF Core)
- SQL Server
- ASP.NET Core Identity
- JWT (JSON Web Tokens)
- FluentValidation
- Swagger (Swashbuckle)

## ğŸ“¦ Paquetes NuGet

```xml
<PackageReference Include="FluentValidation.AspNetCore" Version="11.3.1" />
<PackageReference Include="FluentValidation.DependencyInjectionExtensions" Version="12.0.0" />
<PackageReference Include="Microsoft.AspNetCore.Authentication.JwtBearer" Version="8.0.17" />
<PackageReference Include="Microsoft.AspNetCore.Identity.EntityFrameworkCore" Version="8.0.17" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="9.0.6" />
<PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="9.0.6" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="9.0.6" />
<PackageReference Include="Swashbuckle.AspNetCore" Version="6.6.2" />
```

## ğŸ§‘â€ğŸ¤â€ğŸ§‘ Roles definidos

- Admin.
- Employee.
- Client.

## ğŸ” Base de datos

![MÃ³dulo Auth Swagger](capturas/BD.png)

## ğŸ” MÃ³dulo de AutenticaciÃ³n

Incluye los siguientes endpoints:

- `POST /api/auth/login`: Inicio de sesiÃ³n con validaciÃ³n usando FluentValidation.
- `POST /api/auth/logout`: Cierre de sesiÃ³n.
- `GET /api/auth/me`: ObtenciÃ³n de informaciÃ³n del usuario autenticado.

![MÃ³dulo Auth Swagger](capturas/DOCAUTH.png)

### ğŸ” Endpoints principales

### ğŸ“Œ MÃ³dulo Auth (/api/auth)

| MÃ©todo | Ruta               | DescripciÃ³n                       | Requiere JWT |
| ------ | ------------------ | --------------------------------- | ------------ |
| POST   | `/api/auth/login`  | Login de usuario                  | âŒ           |
| POST   | `/api/auth/logout` | Cerrar sesiÃ³n (invalida el token) | âœ…           |
| GET    | `/api/auth/me`     | Obtener datos del usuario actual  | âœ…           |

### Digrama de caso de uso

![MÃ³dulo Auth Diagrama de casos de uso](capturas/DCAUTH.png)

## ğŸ‘» MÃ³dulo de GÃ©neros

Incluye los siguientes endpoints:

- `GET /api/genre`: Ver gÃ©neros (se puede filtar por Name y paginar con Page - PageSize ).
- `GET /api/genre/{id}`: Ver un gÃ©nero.
- `POST /api/genre`: Crear gÃ©nero con validaciÃ³n usando FluentValidation.
- `PUT /api/genre/{id}`: Editar gÃ©nero con validaciÃ³n usando FluentValidation.
- `DELETE /api/genre/{id}`: Eliminar gÃ©nero.

![MÃ³dulo Generos Swagger](capturas/DOCGENRE.png)

### ğŸ” Endpoints principales

### ğŸ“Œ MÃ³dulo GÃ©nero (/api/genre)

| MÃ©todo | Ruta               | DescripciÃ³n        | Requiere JWT | Admin | Employee |
| ------ | ------------------ | ------------------ | ------------ | ----- | -------- |
| GET    | `/api/genres/`     | Ver gÃ©neros        | âœ…           | âœ…    | âŒ       |
| GET    | `/api/genres/{id}` | Ver un gÃ©nero      | âœ…           | âœ…    | âŒ       |
| POST   | `/api/genres/`     | Crear gÃ©nero       | âœ…           | âœ…    | âŒ       |
| PUT    | `/api/genres/{id}` | Editar un gÃ©nero   | âœ…           | âœ…    | âŒ       |
| DELETE | `/api/genres/{id}` | Eliminar un gÃ©nero | âœ…           | âœ…    | âŒ       |

### Digrama de caso de uso

![MÃ³dulo Auth Diagrama de casos de uso](capturas/DCGENRE.png)

## ğŸ“Œ MÃ³dulo de Empleados

Incluye los siguientes endpoints:

- `GET /api/employee`: Ver empleados (se puede filtar por Name, LastName y paginar con Page - PageSize ).
- `GET /api/employee/{id}`: Ver un empleado .
- `POST /api/employee`: Crear empleado con validaciÃ³n usando FluentValidation.
- `PUT /api/employee/{id}`: Editar empleado con validaciÃ³n usando FluentValidation.
- `DELETE /api/employee/{id}`: Eliminar empleado.

![MÃ³dulo Generos Swagger](capturas/DOCEMPLOYEE.png)

### ğŸ” Endpoints principales

### ğŸ“Œ MÃ³dulo GÃ©nero (/api/employee)

| MÃ©todo | Ruta                 | DescripciÃ³n          | Requiere JWT | Admin | Employee |
| ------ | -------------------- | -------------------- | ------------ | ----- | -------- |
| GET    | `/api/employee/`     | Ver empleado         | âœ…           | âœ…    | âŒ       |
| GET    | `/api/employee/{id}` | Ver un empleado      | âœ…           | âœ…    | âŒ       |
| POST   | `/api/employee/`     | Crear empleado       | âœ…           | âœ…    | âŒ       |
| PUT    | `/api/employee/{id}` | Editar un empleado   | âœ…           | âœ…    | âŒ       |
| DELETE | `/api/employee/{id}` | Eliminar un empleado | âœ…           | âœ…    | âŒ       |

### Digrama de caso de uso

![MÃ³dulo Auth Diagrama de casos de uso](capturas/DCEMPLOYEE.png)

## ğŸ“¦ InstalaciÃ³n y configuraciÃ³n

1. **Clona el repositorio:**

```bash
git clone https://github.com/JeanDev-10/APP-BITLIBRO.git
cd APP-BITLIBRO/API/API-BITLIBRO
```

2. **Configura _appsettings.json_:**
   Debes agregar las claves JWT, conexiÃ³n a base de datos y los orÃ­gines permitidos:

```json
"ConnectionStrings": {
    "DefaultConnection": "Your-default-connection"
  },
  "JWTSettings":{
    "SecretKey":"your-256-bit-secret",
    "Audience":"https://localhost:4200",
    "Issuer":"https://localhost:5188",
    "TokenExpirationInMinutes": 60
  },
  "AllowedOrigins":[
    "http://localhost:4200"
  ]
```

3. **Instala dependecias y construye**
```bash
dotnet restore
dotnet build
```

4. **Ejecuta las migraciones:**

```bash
dotnet ef database update
```

5. **Ejecuta el proyecto:**

```bash
dotnet run
```

---

Acceder a la documentaciÃ³n:
Abrir en navegador: http://localhost:5188/swagger


---
## Autor
- [Jean Pierre RodrÃ­guez Zambrano](https://github.com/JeanDev-10)
---
